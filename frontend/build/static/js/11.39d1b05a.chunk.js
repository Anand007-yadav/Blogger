(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[11],{151:function(e,t,a){"use strict";a.r(t);var n=a(66),l=a(13),o=a(14),s=a(9),i=a(15),r=a(16),c=a(0),d=a.n(c),u=a(37),m=a.n(u),h=a(67),b=a.n(h),E=a(73),g=a.n(E),p=a(75),v=a.n(p),C=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_GOOGLE_CLIENT_ID:"793997026296-b8g4unrahikivqkm28et683u0vusmcea.apps.googleusercontent.com",REACT_APP_TWITTER_CONSUMER_ID:"rUWTD0DaH3IbZRJyCN4j4xPsH",REACT_APP_TWITTER_CONSUMER_SECRET:"4TQ0mMytPmTiW6UwYHLuWCu7v4t2E2rs80VZSJnJM2cYWuzbSw"}).REACT_APP_BASEURL||"http://localhost:5000",S=function(e){Object(r.a)(a,e);var t=Object(i.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).state={title:"",body:"",author:"",date:new Date,isLoggedIn:!1},e.handleChange=e.handleChange.bind(Object(s.a)(e)),e.handleSubmit=e.handleSubmit.bind(Object(s.a)(e)),e.handleEditorChange=e.handleEditorChange.bind(Object(s.a)(e)),e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){"true"===sessionStorage.getItem("isLoggedIn")&&this.setState({author:sessionStorage.getItem("username"),isLoggedIn:!0})}},{key:"handleEditorChange",value:function(e,t){var a=t.getData();this.setState({body:a})}},{key:"handleChange",value:function(e){var t=e.target,a=t.name,l=t.value;this.setState(Object(n.a)({},a,l))}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.setState({date:new Date});var t=v()(this.state.body.trim());if(t.length<400)alert("Cannot submit such a short post!");else{document.querySelector(".spinner-container").style.display="flex",this.setState({body:t});var a={title:this.state.title,author:this.state.author,body:this.state.body,date:this.state.date};m.a.post("".concat(C,"/server/posts/create/"),a).then((function(e){return window.location="/posts"})).catch((function(e){return console.log(e)}))}}},{key:"render",value:function(){return this.state.isLoggedIn?d.a.createElement("div",null,d.a.createElement("div",{className:"spinner-container",style:{display:"none"}},d.a.createElement("div",{className:"spinner-border",role:"status"},d.a.createElement("span",{className:"sr-only"},"Loading..."))),d.a.createElement("div",{className:"new-post"},d.a.createElement("h1",null,"Create New Blog Post",d.a.createElement("span",{className:"full-stop"},".")),d.a.createElement("form",{onSubmit:this.handleSubmit},d.a.createElement("div",{className:"form-group"},d.a.createElement("label",{className:"new-title"},"Title: "),d.a.createElement("input",{className:"form-control new-title",type:"text",name:"title",value:this.state.title,onChange:this.handleChange,required:!0,placeholder:"The Best Title"})),d.a.createElement("div",null,d.a.createElement(b.a,{editor:g.a,onChange:this.handleEditorChange,config:{placeholder:"Start typing your blog post here...",toolbar:["Heading","|","Bold","Italic","Link","NumberedList","BulletedList","|","BlockQuote","MediaEmbed","Undo","Redo"]}})),d.a.createElement("br",null),d.a.createElement("div",{className:"form-group"},d.a.createElement("input",{type:"submit",value:"Create Post",className:"btn btn-outline-primary btn-lg"}))))):d.a.createElement("div",{className:"alert alert-warning",role:"alert",onClick:function(){return window.location="/login"}},"You need to login to create a new post!",d.a.createElement("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close"},d.a.createElement("span",{"aria-hidden":"true",className:"alert-close"},"\xd7"," ")))}}]),a}(c.Component);t.default=S}}]);
//# sourceMappingURL=11.39d1b05a.chunk.js.map