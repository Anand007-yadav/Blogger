{"version":3,"sources":["components/PostsList.js"],"names":["Post","lazy","baseURL","process","REACT_APP_BASEURL","PostsList","state","posts","noOfPosts","axios","get","then","response","setState","data","reverse","document","querySelector","style","display","catch","err","console","error","className","id","role","this","slice","map","currentPost","key","_id","fallback","post","onClick","Component"],"mappings":"mLAEMA,EAAOC,gBAAK,kBAAM,gCAElBC,EAAUC,0WAAYC,mBAAqB,wBAS3CC,E,kDACF,aAAe,IAAD,8BACV,gBAEKC,MAAQ,CACTC,MAAO,GAEPC,UAAW,GANL,E,gEAUO,IAAD,OAChBC,IACKC,IADL,UACYR,EADZ,mBAEKS,MAAK,SAACC,GAEH,EAAKC,SAAS,CAAEN,MAAOK,EAASE,KAAKC,YAGrCC,SAASC,cAAc,mBAAmBC,MAAMC,QAC5C,UAEPC,OAAM,SAACC,GAAD,OAASC,QAAQC,MAAMF,Q,+BAG5B,IAAD,OACL,OACI,yBAAKG,UAAU,cACX,wBAAIC,GAAG,SAAP,eACgB,0BAAMD,UAAU,aAAhB,MAIhB,yBAAKA,UAAU,qBACX,yBAAKA,UAAU,iBAAiBE,KAAK,UACjC,0BAAMF,UAAU,WAAhB,gBAKPG,KAAKrB,MAAMC,MACPqB,MAAM,EAAGD,KAAKrB,MAAME,WACpBqB,KAAI,SAACC,GAAD,OACD,kBAAC,WAAD,CACIC,IAAKD,EAAYE,IACjBC,SApDxB,yBAAKT,UAAU,qBACX,yBAAKA,UAAU,iBAAiBE,KAAK,UACjC,0BAAMF,UAAU,WAAhB,iBAmDgB,kBAACxB,EAAD,CAAMkC,KAAMJ,QAKvBH,KAAKrB,MAAMC,MAAMoB,KAAKrB,MAAME,WACzB,4BACIgB,UAAU,eACVW,QAAS,kBAEL,EAAKtB,SAAS,CACVL,UAAW,EAAKF,MAAME,UAAY,MAL9C,sBAWA,Q,GA/DI4B,aAsET/B","file":"static/js/15.3c6712e4.chunk.js","sourcesContent":["import React, { Component, lazy, Suspense } from \"react\";\r\nimport axios from \"axios\";\r\nconst Post = lazy(() => import(\"./Post\"));\r\n\r\nconst baseURL = process.env.REACT_APP_BASEURL || \"http://localhost:5000\";\r\nconst renderLoader = () => (\r\n    <div className=\"spinner-container\">\r\n        <div className=\"spinner-border\" role=\"status\">\r\n            <span className=\"sr-only\">Loading...</span>\r\n        </div>\r\n    </div>\r\n);\r\n\r\nclass PostsList extends Component {\r\n    constructor() {\r\n        super();\r\n\r\n        this.state = {\r\n            posts: [],\r\n            // Set the no of posts to be rendered to 5\r\n            noOfPosts: 5,\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        axios\r\n            .get(`${baseURL}/server/posts/`)\r\n            .then((response) => {\r\n                // The order of posts is reversed to display the posts in reverse chronological order\r\n                this.setState({ posts: response.data.reverse() });\r\n\r\n                // Remove display of the spinner\r\n                document.querySelector(\".spinner-border\").style.display =\r\n                    \"none\";\r\n            })\r\n            .catch((err) => console.error(err));\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"posts-list\">\r\n                <h1 id=\"title\">\r\n                    Latest Posts<span className=\"full-stop\">.</span>\r\n                </h1>\r\n\r\n                {/* A spinner to indicate loading until posts are stored in state */}\r\n                <div className=\"spinner-container\">\r\n                    <div className=\"spinner-border\" role=\"status\">\r\n                        <span className=\"sr-only\">Loading...</span>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Display the posts in reverse chronological order */}\r\n                {this.state.posts\r\n                    .slice(0, this.state.noOfPosts)\r\n                    .map((currentPost) => (\r\n                        <Suspense\r\n                            key={currentPost._id}\r\n                            fallback={renderLoader()}>\r\n                            <Post post={currentPost} />\r\n                        </Suspense>\r\n                    ))}\r\n\r\n                {/* To load more posts */}\r\n                {this.state.posts[this.state.noOfPosts] ? (\r\n                    <button\r\n                        className=\"btn btn-link\"\r\n                        onClick={() =>\r\n                            // When the button is clicked change the state to reflect the change in the no of posts beoing rendered, which triggers a compnent\r\n                            this.setState({\r\n                                noOfPosts: this.state.noOfPosts + 3,\r\n                            })\r\n                        }>\r\n                        Load More Posts...\r\n                    </button>\r\n                ) : (\r\n                    \"\"\r\n                )}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default PostsList;\r\n"],"sourceRoot":""}